---
title: "ডকারফাইল বেসিক ও নির্দেশনা"
icon: uim:docker
---

### ১. Dockerfile কী?

**ডকারফাইল** হলো একটি টেক্সট ফাইল যেখানে ধাপে ধাপে লেখা থাকে—আপনার অ্যাপের পরিবেশ কিভাবে তৈরি হবে, কোন কোন ডিপেন্ডেন্সি লাগবে, এবং কনটেইনার চালু হলে কীভাবে চলবে।

**কেন দরকার?**
- ডকারফাইল ছাড়া কনটেইনার পরিবেশ ম্যানুয়ালি তৈরি করতে হয়—যা সময়সাপেক্ষ, ভুলের সম্ভাবনা বেশি।
- ডকারফাইল দিয়ে পরিবেশ বারবার একইভাবে তৈরি করা যায়—ডেভেলপমেন্ট, টেস্ট, প্রোডাকশন সব জায়গায় একরকম থাকে।
- ভার্সন কন্ট্রোলে ডকারফাইল রাখলে, কে কখন কী পরিবর্তন করেছে সহজে দেখা যায়।
- অটোমেশন পাইপলাইনে (CI/CD) ডকারফাইল ব্যবহার করলে বিল্ড/টেস্ট/ডিপ্লয় অটো হয়ে যায়।

**বাস্তব উদাহরণ:**
যেমন রান্নার রেসিপি—একবার লিখে রাখলে, বারবার একইভাবে রান্না করা যায়; নতুন কেউও সহজে বুঝতে পারে।



## ২. Dockerfile-এর সব অফিসিয়াল নির্দেশনা (Instructions)

নিচে ডকারফাইলে ব্যবহৃত সব গুরুত্বপূর্ণ এবং অফিসিয়ালি সমর্থিত নির্দেশনার তালিকা, বিস্তারিত ব্যাখ্যা, ব্যবহারিক টিপস ও উদাহরণসহ:

### ১. FROM
বেস ইমেজ নির্ধারণ করে—আপনার কনটেইনার কোন অপারেটিং সিস্টেম বা পরিবেশ থেকে শুরু হবে।
**ব্যবহার:** সব ডকারফাইলে প্রথমেই FROM থাকতে হবে।
**টিপ:** সবসময় অফিসিয়াল বা বিশ্বস্ত ইমেজ ব্যবহার করুন।
**ভুল:** ভুল বেস ইমেজ নিলে কম্প্যাটিবিলিটি/সিকিউরিটি সমস্যা হতে পারে।
```dockerfile
FROM ubuntu:22.04
```

### ২. RUN
বিল্ড টাইমে শেল কমান্ড চালায়—ডিপেন্ডেন্সি ইনস্টল, বিল্ড, কনফিগ পরিবর্তন ইত্যাদি।
**ব্যবহার:** প্রতিটি RUN কমান্ড একটি নতুন লেয়ার তৈরি করে।
**টিপ:** একাধিক কমান্ড একসাথে লিখলে কম লেয়ার হয় (যেমন: `RUN apt-get update && apt-get install -y curl`)।
**ভুল:** টেম্প/ক্যাশ ফাইল বিল্ড শেষে পরিষ্কার না করলে ইমেজ বড় হয়।
```dockerfile
RUN apt-get update && apt-get install -y curl
```

### ৩. CMD
কনটেইনার চালু হলে ডিফল্ট কমান্ড হিসেবে চলে।
**ব্যবহার:** `docker run`-এ কমান্ড দিলে override করা যায়।
**টিপ:** একাধিক কমান্ড থাকলে ENTRYPOINT ও CMD একসাথে ব্যবহার করুন।
**ভুল:** CMD ভুল হলে কনটেইনার বন্ধ হয়ে যায়।
```dockerfile
CMD ["python3", "app.py"]
```

### ৪. LABEL
ইমেজের মেটাডাটা (রক্ষণাবেক্ষণকারী, ভার্সন, বিবরণ) যোগ করতে ব্যবহার হয়।
**ব্যবহার:** অটোমেশন, ট্র্যাকিং, নিরাপত্তা স্ক্যান ইত্যাদিতে কাজে লাগে।
**টিপ:** প্রজেক্ট তথ্য, maintainer, version সবসময় label করুন।
```dockerfile
LABEL maintainer="webx@example.com"
```

### ৫. EXPOSE
কনটেইনারের কোন পোর্ট খোলা থাকবে তা ডকুমেন্টেশন হিসেবে দেয়।
**ব্যবহার:** অ্যাপ/সার্ভিস কোন পোর্টে চলে তা ঘোষণা করা।
**টিপ:** EXPOSE শুধু ডকুমেন্টেশন, আসল পোর্ট বাইন্ডিং `docker run -p` দিয়ে হয়।
```dockerfile
EXPOSE 8080
```

### ৬. ENV
এনভায়রনমেন্ট ভ্যারিয়েবল সেট করতে ব্যবহার হয়—কনফিগ, পাথ, সিক্রেট ইত্যাদি।
**ব্যবহার:** বিল্ড টাইম ও রানটাইমে ভ্যারিয়েবল ব্যবহার করা যায়।
**টিপ:** সংবেদনশীল তথ্য (পাসওয়ার্ড) ENV-এ না রাখাই ভালো; সিক্রেট vault ব্যবহার করুন।
```dockerfile
ENV APP_HOME=/app
```

### ৭. ADD
ফাইল/ডিরেক্টরি কপি করে, `.tar` ফাইল অটো-এক্সট্রাক্ট করতে পারে, রিমোট URL থেকেও ডাউনলোড করতে পারে।
**ব্যবহার:** আর্কাইভ extract বা রিমোট fetch দরকার হলে ADD ব্যবহার করুন।
**টিপ:** সাধারণ কপি-র জন্য COPY ব্যবহার করুন—ADD বেশি privilege দেয়, নিরাপত্তা ঝুঁকি হতে পারে।
```dockerfile
ADD app.tar.gz /app
```

### ৮. COPY
ফাইল/ডিরেক্টরি কপি করে—ADD-এর তুলনায় সহজ ও নিরাপদ।
**ব্যবহার:** সোর্স কোড, কনফিগ, অ্যাসেট কপি করতে।
**টিপ:** `.dockerignore` দিয়ে অপ্রয়োজনীয় ফাইল বাদ দিন।
```dockerfile
COPY . /app
```

### ৯. ENTRYPOINT
CMD-এর মতো, কিন্তু কনটেইনারের মূল executable হিসেবে ব্যবহার হয়—override করা কঠিন।
**ব্যবহার:** শেল স্ক্রিপ্ট, অ্যাপ বাইনারি, সার্ভার প্রসেস চালাতে।
**টিপ:** ENTRYPOINT + CMD একসাথে ব্যবহার করলে flexible override পাওয়া যায়।
```dockerfile
ENTRYPOINT ["python3", "app.py"]
```

### ১০. VOLUME
কনটেইনারে স্থায়ী স্টোরেজের জন্য নির্দিষ্ট করে—host বা অন্য কনটেইনারে data save হয়।
**ব্যবহার:** ডাটাবেস, আপলোড, লগ ইত্যাদি সংরক্ষণ করতে।
**টিপ:** VOLUME ঘোষণা করলে data loss কমে, আপগ্রেড সহজ হয়।
```dockerfile
VOLUME /data
```

### ১১. USER
কনটেইনারে কোন ইউজার হিসেবে কমান্ড চলবে তা নির্ধারণ করে—নিরাপত্তার জন্য ভালো।
**ব্যবহার:** root ছাড়া অন্য user ব্যবহার করুন (যেমন: `USER appuser`)।
**টিপ:** প্রোডাকশনে root user এড়িয়ে চলুন।
```dockerfile
USER webx
```

### ১২. WORKDIR
কনটেইনারে কাজ করার ডিরেক্টরি সেট করে—পরবর্তী কমান্ড এই path-এ চলবে।
**ব্যবহার:** সোর্স কোড, বিল্ড, রান সব নির্দিষ্ট path-এ করতে।
**টিপ:** WORKDIR না দিলে ডিফল্ট `/` হয়, path mismatch হতে পারে।
```dockerfile
WORKDIR /app
```

### ১৩. ARG
বিল্ড টাইম আর্গুমেন্ট, যা ইমেজ তৈরির সময় ব্যবহার করা যায়—রানটাইমে access করা যায় না।
**ব্যবহার:** ভার্সন, বিল্ড ফ্ল্যাগ, সিক্রেট বিল্ড টাইমে পাঠাতে।
**টিপ:** ARG শুধু বিল্ড টাইমে, ENV রানটাইমে।
```dockerfile
ARG VERSION=1.0
```

### ১৪. ONBUILD
parent image তৈরি হলে ট্রিগার করা হবে এমন কমান্ড নির্ধারণ করে—child image build-এ execute হয়।
**ব্যবহার:** টেমপ্লেট/base image বানাতে।
**টিপ:** ONBUILD প্রোডাকশন ইমেজে এড়িয়ে চলুন—অনাকাঙ্ক্ষিত trigger হতে পারে।
```dockerfile
ONBUILD COPY . /app
```

### ১৫. STOPSIGNAL
কনটেইনারে termination signal নির্ধারণ করে—shutdown/control সহজ হয়।
**ব্যবহার:** গ্রেসফুল shutdown, কাস্টম signal handle করতে।
**টিপ:** ডিফল্ট SIGTERM, দরকার হলে override করুন।
```dockerfile
STOPSIGNAL SIGTERM
```

### ১৬. HEALTHCHECK
কনটেইনারের health/status মনিটরিং করার জন্য—service/app ঠিক আছে কিনা চেক করে।
**ব্যবহার:** নিয়মিত চেক, restart policy, alert trigger করতে।
**টিপ:** HEALTHCHECK না দিলে container unhealthy হলেও detect হয় না।
```dockerfile
HEALTHCHECK --interval=30s CMD curl -f http://localhost:8080/ || exit 1
```

### ১৭. SHELL
কোন shell ব্যবহার করে RUN, CMD, ENTRYPOINT চালানো হবে তা নির্ধারণ করে—ডিফল্ট `/bin/sh` (Linux), override করা যায়।
**ব্যবহার:** Windows কনটেইনারে PowerShell, Linux-এ bash/sh।
**টিপ:** shell syntax mismatch হলে build/run error হতে পারে।
```dockerfile
SHELL ["powershell", "-command"]
```
💡 **টিপস:**
- সব নির্দেশনা বড় হাতের বা ছোট হাতের অক্ষরে লেখা যায়।
- প্রত্যেকটি নির্দেশনা একটি নতুন **লেয়ার** তৈরি করে (RUN, COPY, ADD)।
- অনুপস্থিত নির্দেশনা (যেমন CMD) হলে, ডিফল্ট shell ব্যবহৃত হয়।

---

চলুন একটি **সম্পূর্ণ ডকারফাইল উদাহরণ** দেখি, যেখানে প্রায় সব গুরুত্বপূর্ণ নির্দেশনা ব্যবহার করা হয়েছে। এখানে **Python Flask অ্যাপ** এর উদাহরণ দেয়া হয়েছে, যা সহজে চালানো যায় এবং সব কমান্ড ব্যবহারিকভাবে দেখানো হয়েছে। 🚀

---

```dockerfile title="Dockerfile"
# ----------------------------
# 1. Base Image
# ----------------------------
FROM python:3.12-slim

# ----------------------------
# 2. Metadata
# ----------------------------
LABEL maintainer="webx@example.com"
LABEL version="1.0"
LABEL description="A sample Flask app with complete Dockerfile instructions"

# ----------------------------
# 3. Build Arguments
# ----------------------------
ARG APP_VERSION=1.0

# ----------------------------
# 4. Environment Variables
# ----------------------------
ENV APP_HOME=/app
ENV FLASK_ENV=production
ENV PYTHONUNBUFFERED=1

# ----------------------------
# 5. Working Directory
# ----------------------------
WORKDIR $APP_HOME

# ----------------------------
# 6. Copy Application Files
# ----------------------------
COPY requirements.txt ./
COPY app.py ./

# ----------------------------
# 7. Install Dependencies
# ----------------------------
RUN pip install --no-cache-dir -r requirements.txt

# ----------------------------
# 8. Expose Port
# ----------------------------
EXPOSE 5000

# ----------------------------
# 9. Volume (Optional for persistent data)
# ----------------------------
VOLUME ["/app/data"]

# ----------------------------
# 10. User (Optional for security)
# ----------------------------
RUN useradd -ms /bin/bash webx
USER webx

# ----------------------------
# 11. Healthcheck
# ----------------------------
HEALTHCHECK --interval=30s --timeout=5s \
  CMD curl -f http://localhost:5000/ || exit 1

# ----------------------------
# 12. Entry Point
# ----------------------------
ENTRYPOINT ["python3", "app.py"]

# ----------------------------
# 13. Default Command (can be overridden)
# ----------------------------
CMD ["--port", "5000"]

# ----------------------------
# 14. Stop Signal
# ----------------------------
STOPSIGNAL SIGTERM

# ----------------------------
# 15. Shell (Optional if custom shell needed)
# ----------------------------
SHELL ["/bin/bash", "-c"]
```

---


### ⚡ ব্যাখ্যা:

১. **FROM**: Python slim ইমেজ ব্যবহার করা হয়েছে।
২. **LABEL**: ইমেজের মেটাডাটা দেয়।
৩. **ARG**: বিল্ড টাইম ভ্যারিয়েবল।
৪. **ENV**: কনটেইনার-লেভেল environment variable।
৫. **WORKDIR**: কাজ করার ডিরেক্টরি।
৬. **COPY**: লোকাল ফাইল কনটেইনারে কপি।
৭. **RUN**: ডিপেন্ডেন্সি ইনস্টল।
৮. **EXPOSE**: Flask অ্যাপের পোর্ট।
৯. **VOLUME**: স্থায়ী ডেটা path।
১০. **USER**: non-root user ব্যবহার।
১১. **HEALTHCHECK**: কনটেইনার health monitor।
১২. **ENTRYPOINT + CMD**: কনটেইনার চালুর কমান্ড।
১৩. **STOPSIGNAL**: গ্রেসফুল shutdown।
১৪. **SHELL**: কাস্টম shell দরকার হলে।



### ৩. ওয়ার্কফ্লো

১. ডকারফাইল তৈরি করুন—ধাপে ধাপে পরিবেশ ও অ্যাপ সেটআপ লিখুন।
২. বিল্ড করুন: `docker build -t myapp .`
৩. কনটেইনার চালান: `docker run myapp`
৪. সমস্যা হলে:
	- বিল্ড লগ দেখুন (এরর মেসেজ বুঝতে চেষ্টা করুন)
	- কনটেক্সট ছোট করুন (অপ্রয়োজনীয় ফাইল বাদ দিন)
	- `.dockerignore` আপডেট করুন
	- RUN/CMD কমান্ডে shell syntax ঠিক আছে কিনা দেখুন




### ৪. কেন গুরুত্বপূর্ণ?

**ডকারফাইল** দিয়ে পরিবেশ কাস্টমাইজ করা যায়, অটোমেশন পাইপলাইনে সংযুক্ত করা যায়, এবং দ্রুত ও নিরাপদভাবে ডিপ্লয় করা যায়।
এছাড়া, নিরাপত্তা স্ক্যান, পুনরুত্পাদনযোগ্যতা, এবং rollback সহজ হয়।




### ৫. কখন ব্যবহার করবেন?

যখন নতুন অ্যাপ প্যাকেজ করতে চান, একাধিক পরিবেশ সেটআপ দরকার, অথবা CI/CD পাইপলাইনে বিল্ড/টেস্ট/ডিপ্লয় অটোমেট করতে চান—ডকারফাইল অপরিহার্য।
এছাড়া, পুরনো অ্যাপ কনটেইনারাইজ করতে, বা ডেভ/প্রোড/টেস্ট পরিবেশ আলাদা করতে চাইলে ডকারফাইল ব্যবহার করুন।




### ৬. সাধারণ ভুল ও সমাধান

**ভুল ও সমাধান:**
- অপ্টিমাইজড না হওয়া ডকারফাইল: অপ্রয়োজনীয় লেয়ার, বড় কনটেক্সট, ক্যাশ মিস
	- সমাধান: লেয়ার কমান, `.dockerignore` ব্যবহার করুন, বিল্ড ক্যাশ অপ্টিমাইজ করুন
- ভুল বেস ইমেজ: কম্প্যাটিবিলিটি সমস্যা, নিরাপত্তা ঝুঁকি
	- সমাধান: অফিসিয়াল/ভেরিফায়েড ইমেজ ব্যবহার করুন, নিরাপত্তা স্ক্যান চালান
- অপ্রয়োজনীয় ফাইল কপি: অপ্রয়োজনীয় ফাইল ইমেজে চলে আসে
	- সমাধান: `.dockerignore` আপডেট করুন, কেবল প্রয়োজনীয় ফাইল কপি করুন




### ৭. সেরা চর্চা

**সেরা চর্চা:**
- অফিসিয়াল বেস ইমেজ ব্যবহার করুন
- লেয়ার কম রাখুন—একই ধরনের কমান্ড একসাথে লিখুন
- বিল্ড শেষে temp/cache ফাইল পরিষ্কার করুন
- `.dockerignore` দিয়ে অপ্রয়োজনীয় ফাইল বাদ দিন
- মাল্টি-স্টেজ বিল্ড ব্যবহার করুন—ফাইনাল ইমেজ ছোট ও নিরাপদ হবে
- ডকারফাইলে মন্তব্য লিখুন—পরবর্তী ব্যবহারকারী সহজে বুঝতে পারবে
- Healthcheck, labels, এবং version info যোগ করুন




### ৮. ইন্ডাস্ট্রি ট্রেন্ড

**ইন্ডাস্ট্রি ট্রেন্ড:**
- মাল্টি-স্টেজ বিল্ড—বিল্ড টুলস ও রানটাইম আলাদা
- অটোমেটেড লিন্টিং—`hadolint` দিয়ে ডকারফাইল চেক করুন
- নিরাপত্তা স্ক্যানিং—`trivy`, `docker scan` দিয়ে দুর্বলতা চেক করুন
- BuildKit—দ্রুত ও দক্ষ বিল্ড, উন্নত ফিচার
- SBOM (Software Bill of Materials)—ইমেজের ডিপেন্ডেন্সি লিস্ট তৈরি করুন




## উদাহরণ ও তুলনা

**ডকারফাইল**—রান্নার রেসিপি: ধাপে ধাপে কীভাবে খাবার (ইমেজ) তৈরি হবে
**FROM**—রান্নার উপকরণ (বেস ইমেজ)
**RUN**—রান্নার কাজ (ইনস্টল/কনফিগার)
**COPY**—উপকরণ যোগ করা (সোর্স কোড/ফোল্ডার)
**CMD**—খাবার পরিবেশন (কনটেইনার চালু হলে কী হবে)



## দ্রুত রেফারেন্স
```dockerfile
FROM node:18
WORKDIR /app
COPY . /app
RUN npm install
CMD ["node", "app.js"]
```

**বিল্ড:**
```bash
docker build -t myapp .
```
**চালান:**
```bash
docker run myapp
```



## উপসংহার

ডকারফাইল—কাস্টম ইমেজ তৈরির জন্য অপরিহার্য। FROM, RUN, COPY, CMD—এই চারটি নির্দেশনা ভালোভাবে জানলে, দক্ষ, ছোট, এবং নিরাপদ ডিপ্লয়মেন্ট সহজ হবে।
মাল্টি-স্টেজ বিল্ড, লিন্টিং, এবং নিরাপত্তা স্ক্যান—এসব আধুনিক চর্চা অনুসরণ করলে production-ready ইমেজ তৈরি করা যাবে।