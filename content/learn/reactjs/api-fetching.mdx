---
title: API থেকে ডেটা ফেচিং
icon: ri:database-2-line
description: রিঅ্যাক্টে API থেকে ডেটা লোড করা, লোডিং স্টেট ম্যানেজ করা, এরর হ্যান্ডলিং এবং ডেটা ক্যাশিং সম্পর্কে বিস্তারিত আলোচনা।
keywords:
  - API fetching
  - useEffect
  - async await
  - error handling
  - loading state
  - data caching
  - axios
  - fetch API
---

## ভূমিকা

মডার্ন ওয়েব অ্যাপ্লিকেশনে API থেকে ডেটা লোড করা একটি মৌলিক বিষয়। এটি বুঝতে একটি সহজ উপমা ব্যবহার করি:

### রেস্তোরাঁর উপমা
কল্পনা করুন, আপনি একটি রেস্তোরাঁয় খেতে গেছেন:
- **মেনু দেখা** = API এন্ডপয়েন্ট জানা
- **অর্ডার দেওয়া** = API কল করা
- **খাবারের জন্য অপেক্ষা** = লোডিং স্টেট
- **খাবার পাওয়া/না পাওয়া** = সাক্সেস/এরর স্টেট

## ডেটা ফেচিং-এর মৌলিক পদ্ধতি

### ১. fetch API ব্যবহার
```jsx
function UserList() {
  const [users, setUsers] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  useEffect(() => {
    const fetchUsers = async () => {
      try {
        const response = await fetch('https://api.example.com/users');
        if (!response.ok) {
          throw new Error('সার্ভার এরর!');
        }
        const data = await response.json();
        setUsers(data);
        setError(null);
      } catch (err) {
        setError(err.message);
      } finally {
        setLoading(false);
      }
    };

    fetchUsers();
  }, []);

  if (loading) return <div>লোড হচ্ছে...</div>;
  if (error) return <div>এরর: {error}</div>;

  return (
    <ul>
      {users.map(user => (
        <li key={user.id}>{user.name}</li>
      ))}
    </ul>
  );
}
```

### ২. axios ব্যবহার
```jsx
import axios from 'axios';

function ProductList() {
  const [products, setProducts] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    axios.get('https://api.example.com/products')
      .then(response => {
        setProducts(response.data);
      })
      .catch(error => {
        console.error('এরর:', error);
      })
      .finally(() => {
        setLoading(false);
      });
  }, []);

  // রেন্ডারিং লজিক...
}
```

## বেস্ট প্র্যাকটিস

### ১. কাস্টম হুক তৈরি
```jsx
function useFetch(url) {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  useEffect(() => {
    const fetchData = async () => {
      try {
        const response = await fetch(url);
        const json = await response.json();
        setData(json);
        setError(null);
      } catch (err) {
        setError(err.message);
      } finally {
        setLoading(false);
      }
    };

    fetchData();
  }, [url]);

  return { data, loading, error };
}

// ব্যবহার
function PostList() {
  const { data: posts, loading, error } = useFetch('https://api.example.com/posts');
  // রেন্ডারিং লজিক...
}
```

### ২. এবর্ট কন্ট্রোলার ব্যবহার
```jsx
function SearchResults({ query }) {
  const [results, setResults] = useState([]);

  useEffect(() => {
    const controller = new AbortController();

    const fetchResults = async () => {
      try {
        const response = await fetch(`/api/search?q=${query}`, {
          signal: controller.signal
        });
        const data = await response.json();
        setResults(data);
      } catch (err) {
        if (err.name === 'AbortError') {
          console.log('অনুসন্ধান বাতিল করা হয়েছে');
        }
      }
    };

    fetchResults();

    return () => controller.abort();
  }, [query]);

  // রেন্ডারিং লজিক...
}
```

## উন্নত বিষয়সমূহ

### ১. ডেটা ক্যাশিং
```jsx
function useCache(key, fetcher) {
  const cache = useRef({});
  const [data, setData] = useState(null);

  useEffect(() => {
    if (cache.current[key]) {
      setData(cache.current[key]);
      return;
    }

    fetcher().then(result => {
      cache.current[key] = result;
      setData(result);
    });
  }, [key, fetcher]);

  return data;
}
```

### ২. রিট্রাই লজিক
```jsx
async function fetchWithRetry(url, retries = 3) {
  for (let i = 0; i < retries; i++) {
    try {
      const response = await fetch(url);
      if (response.ok) return response.json();
    } catch (err) {
      if (i === retries - 1) throw err;
      await new Promise(resolve => setTimeout(resolve, 1000 * Math.pow(2, i)));
    }
  }
}
```

### ৩. ডেটা রিফ্রেশিং
```jsx
function useDataRefresh(url, interval = 5000) {
  const [data, setData] = useState(null);

  useEffect(() => {
    const fetchData = async () => {
      const response = await fetch(url);
      const newData = await response.json();
      setData(newData);
    };

    fetchData();
    const timer = setInterval(fetchData, interval);

    return () => clearInterval(timer);
  }, [url, interval]);

  return data;
}
```

## এরর হ্যান্ডলিং

### ১. এরর বাউন্ডারি
```jsx
class ErrorBoundary extends React.Component {
  state = { hasError: false, error: null };

  static getDerivedStateFromError(error) {
    return { hasError: true, error };
  }

  render() {
    if (this.state.hasError) {
      return <div>দুঃখিত, কিছু একটা ভুল হয়েছে।</div>;
    }
    return this.props.children;
  }
}
```

### ২. লোডিং স্কেলেটন
```jsx
function Skeleton() {
  return (
    <div className="animate-pulse">
      <div className="h-4 bg-gray-200 rounded w-3/4"></div>
      <div className="space-y-3 mt-4">
        <div className="h-4 bg-gray-200 rounded"></div>
        <div className="h-4 bg-gray-200 rounded w-5/6"></div>
      </div>
    </div>
  );
}
```

## অনুশীলনী

### ১. ইউজার প্রোফাইল লোডার
একটি ইউজার প্রোফাইল পেজ তৈরি করুন যেখানে:
- প্রোফাইল ডেটা API থেকে লোড হবে
- লোডিং স্কেলেটন থাকবে
- এরর হ্যান্ডলিং থাকবে
- ডেটা ক্যাশিং থাকবে

```jsx
function UserProfile({ userId }) {
  const { data, loading, error } = useFetch(`/api/users/${userId}`);
  
  if (loading) return <Skeleton />;
  if (error) return <ErrorMessage message={error} />;
  
  return (
    <div className="profile-card">
      <img src={data.avatar} alt={data.name} />
      <h2>{data.name}</h2>
      <p>{data.bio}</p>
    </div>
  );
}
```

### ২. পেজিনেটেড প্রোডাক্ট লিস্ট
একটি প্রোডাক্ট লিস্টিং পেজ তৈরি করুন:
- পেজিনেশন সাপোর্ট থাকবে
- ফিল্টার অপশন থাকবে
- ডেটা রিফ্রেশ থাকবে
- লোডিং স্টেট দেখাবে

## সতর্কতা

১. **API কল সীমাবদ্ধতা**
- রেট লিমিটিং মাথায় রাখুন
- টু মেনি রিকোয়েস্ট এড়িয়ে চলুন
- ক্যাশিং ব্যবহার করুন

২. **সিকিউরিটি**
- সেনসিটিভ ডেটা API কী প্রোটেক্ট করুন
- CORS পলিসি মেনে চলুন
- XSS অ্যাটাক থেকে বাঁচুন

## উপসংহার

API থেকে ডেটা ফেচিং রিঅ্যাক্টের একটি গুরুত্বপূর্ণ বিষয়। সঠিক প্যাটার্ন ও বেস্ট প্র্যাকটিস অনুসরণ করে আপনি একটি রোবাস্ট ও পারফরম্যান্ট অ্যাপ্লিকেশন তৈরি করতে পারবেন। পরবর্তী পাঠে আমরা শিখব কীভাবে `useContext` দিয়ে গ্লোবাল স্টেট ম্যানেজ করতে হয়।
