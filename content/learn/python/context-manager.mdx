---
title: কনটেক্সট ম্যানেজার ও with স্টেটমেন্ট
icon: solar:alt-arrow-right-bold-duotone
---

পাইথনে কনটেক্সট ম্যানেজার ও `with` স্টেটমেন্ট এমন একটি শক্তিশালী ফিচার, যা রিসোর্স (যেমন: ফাইল, নেটওয়ার্ক কানেকশন, ডাটাবেজ) ব্যবস্থাপনা সহজ ও নিরাপদ করে তোলে। এই পাঠে আমরা জানবো কনটেক্সট ম্যানেজার কী, কেন দরকার, এবং কীভাবে ব্যবহার ও তৈরি করা যায়।

## ১. কনটেক্সট ম্যানেজার কী?

কনটেক্সট ম্যানেজার এমন একটি অবজেক্ট, যা কোনো রিসোর্স ব্যবহারের আগে সেটআপ করে এবং ব্যবহারের পরে ক্লিন-আপ করে। উদাহরণ: ফাইল ওপেন করা, কাজ শেষে ফাইল বন্ধ করা।

## ২. `with` স্টেটমেন্ট কেন দরকার?

`with` স্টেটমেন্ট ব্যবহার করলে রিসোর্স ব্যবস্থাপনা স্বয়ংক্রিয়ভাবে হয়। যেমন, ফাইল ওপেন করলে, কাজ শেষে ফাইল নিজে থেকেই বন্ধ হয়ে যায়—even যদি এক্সসেপশন ওঠে।

### উদাহরণ:
```python
with open('data.txt', 'r') as f:
    content = f.read()
print(content)
# এখানে ফাইল নিজে থেকেই বন্ধ হয়ে যাবে
```

## ৩. কনটেক্সট ম্যানেজার কিভাবে কাজ করে?

কনটেক্সট ম্যানেজার দুইটি বিশেষ মেথড ব্যবহার করে:
- `__enter__`: রিসোর্স সেটআপ
- `__exit__`: রিসোর্স ক্লিন-আপ

### উদাহরণ: কাস্টম কনটেক্সট ম্যানেজার
```python
class MyContext:
    def __enter__(self):
        print("রিসোর্স প্রস্তুত!")
        return self
    def __exit__(self, exc_type, exc_val, exc_tb):
        print("রিসোর্স ক্লিন-আপ!")

with MyContext() as ctx:
    print("কাজ চলছে...")
```

## ৪. রিয়েল-লাইফ উদাহরণ: ফাইল হ্যান্ডলিং

ধরা যাক, আপনি ফাইল থেকে ডাটা পড়ছেন।

```python
with open('students.csv', 'r') as file:
    for line in file:
        print(line.strip())
# ফাইল নিজে থেকেই বন্ধ হবে
```

## ৫. এক্সসেপশন হ্যান্ডলিং ও কনটেক্সট ম্যানেজার

`with` ব্লকের ভিতরে এক্সসেপশন উঠলে, `__exit__` মেথড এক্সিকিউট হয় এবং রিসোর্স ক্লিন-আপ হয়।

```python
class SafeFile:
    def __init__(self, filename):
        self.filename = filename
    def __enter__(self):
        self.file = open(self.filename, 'r')
        return self.file
    def __exit__(self, exc_type, exc_val, exc_tb):
        self.file.close()
        if exc_type:
            print("এক্সসেপশন ধরা পড়েছে:", exc_val)
        return False  # এক্সসেপশন propagate হবে

with SafeFile('data.txt') as f:
    print(f.read())
```

## ৬. contextlib: সহজ কনটেক্সট ম্যানেজার

পাইথনের `contextlib` মডিউল দিয়ে সহজে কনটেক্সট ম্যানেজার তৈরি করা যায়।

```python
from contextlib import contextmanager

@contextmanager
def open_file(name):
    f = open(name, 'r')
    try:
        yield f
    finally:
        f.close()

with open_file('data.txt') as f:
    print(f.read())
```

## ৭. Analogies: হোটেল রুম

কনটেক্সট ম্যানেজারকে ভাবুন হোটেল রুমের মতো। চেক-ইন করলে রুম প্রস্তুত হয় (`__enter__`), চেক-আউট করলে রুম পরিষ্কার হয় (`__exit__`)। আপনি শুধু রুম ব্যবহার করেন, পরিষ্কার-পরিচ্ছন্নতার চিন্তা করতে হয় না।

## ৮. Best Practices

- রিসোর্স ব্যবহারে সবসময় `with` স্টেটমেন্ট ব্যবহার করুন
- কাস্টম কনটেক্সট ম্যানেজার তৈরি করলে `__enter__` ও `__exit__` ঠিকভাবে লিখুন
- বড় প্রজেক্টে `contextlib` ব্যবহার করুন
- এক্সসেপশন হ্যান্ডলিং নিশ্চিত করুন

## ৯. সংক্ষেপে

- কনটেক্সট ম্যানেজার রিসোর্স ব্যবস্থাপনা সহজ ও নিরাপদ করে
- `with` স্টেটমেন্টে রিসোর্স স্বয়ংক্রিয়ভাবে ক্লিন-আপ হয়
- কাস্টম কনটেক্সট ম্যানেজার ও `contextlib` দিয়ে আরও শক্তিশালী ব্যবস্থাপনা সম্ভব

এভাবেই পাইথনে কনটেক্সট ম্যানেজার ও `with` স্টেটমেন্ট ব্যবহার করে আপনার কোডকে আরও নিরাপদ, পরিষ্কার ও মেইনটেনেবল করতে পারেন।
