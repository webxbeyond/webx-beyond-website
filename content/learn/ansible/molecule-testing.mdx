---
title: Molecule দিয়ে লোকাল টেস্টিং
icon: solar:alt-arrow-right-bold-duotone
---

আনসিবল প্লেবুক লিখে সরাসরি প্রোডাকশন বা রিয়েল সার্ভারে রান করাটা ঝুঁকিপূর্ণ। তাই, প্লেবুকের নির্ভরযোগ্যতা যাচাই করার জন্য লোকাল টেস্টিং অপরিহার্য। এই কাজের জন্য সবচেয়ে জনপ্রিয় টুল হচ্ছে **Molecule**।

## Molecule কী?
Molecule হলো একটি টেস্টিং ফ্রেমওয়ার্ক, যা আনসিবল রোল, প্লেবুক, ও টাস্ককে লোকাল এনভায়রনমেন্টে টেস্ট করার সুযোগ দেয়। এটি Docker, Vagrant, Podman, LXC ইত্যাদি ড্রাইভার ব্যবহার করে ভার্চুয়াল টেস্টিং ইন্সট্যান্স তৈরি করে।

### বাস্তব উদাহরণ:
ধরা যাক, আপনি একটি Apache Web Server সেটআপের জন্য আনসিবল রোল লিখেছেন। সরাসরি সার্ভারে রান না করে, Molecule দিয়ে Docker কন্টেইনারে রোলটি টেস্ট করতে পারবেন। এতে করে ভুল কনফিগারেশন, মিসিং প্যাকেজ, বা আনএক্সপেক্টেড বাগ সহজেই ধরা পড়বে।

## কেন Molecule ব্যবহার করবেন?
- **নিরাপত্তা:** প্রোডাকশন ডেটা বা সার্ভার ক্ষতিগ্রস্ত হওয়ার ঝুঁকি কমে যায়।
- **রিপিটেবল টেস্ট:** একই টেস্ট বারবার চালানো যায়, ফলে কোডের স্থায়িত্ব নিশ্চিত হয়।
- **CI/CD ইন্টিগ্রেশন:** Jenkins, GitHub Actions ইত্যাদির সাথে সহজেই ইন্টিগ্রেট করা যায়।
- **বেস্ট প্র্যাকটিস:** রোল/প্লেবুক ডেভেলপমেন্টে টেস্টিং কালচার গড়ে ওঠে।

## Molecule ইনস্টলেশন

```bash
pip install molecule[docker]
```

> **টিপ:** Docker ড্রাইভার ব্যবহার করতে চাইলে `docker` অবশ্যই ইনস্টল থাকতে হবে।

## Molecule Structure

Molecule ব্যবহার করলে, প্রতিটি রোলের মধ্যে `molecule/` ফোল্ডার তৈরি হয়। এর মধ্যে `default/` নামে একটি স্যাম্পল সিনারিও থাকে।

```
myrole/
  tasks/
  handlers/
  ...
  molecule/
    default/
      molecule.yml
      converge.yml
      verify.yml
```

- **molecule.yml:** টেস্ট কনফিগারেশন (কোন ড্রাইভার, প্ল্যাটফর্ম, ইমেজ ইত্যাদি)
- **converge.yml:** কোন প্লেবুক/রোল টেস্ট হবে
- **verify.yml:** টেস্ট ভেরিফিকেশন (যেমন, Apache চলেছে কিনা)

## প্রথম Molecule টেস্ট: উদাহরণ

ধরা যাক, আপনি `webserver` নামে একটি রোল তৈরি করেছেন।

```bash
cd webserver
molecule init scenario default -r webserver -d docker
molecule test
```

- প্রথম কমান্ডে `molecule/` ফোল্ডার ও ফাইল তৈরি হবে।
- `molecule test` কমান্ডে নিচের ধাপগুলো চলবে:
  1. **Create:** Docker কন্টেইনার তৈরি
  2. **Converge:** প্লেবুক/রোল রান
  3. **Verify:** টেস্ট (যেমন, Apache চলেছে কিনা)
  4. **Destroy:** কন্টেইনার ডিলিট

## Analogy: "রান্না করার আগে স্বাদ নিয়ে দেখা"
যেমন রান্না করার সময় চূড়ান্ত পরিবেশন করার আগে একটু স্বাদ নিয়ে দেখা হয়, ঠিক তেমনি Molecule দিয়ে প্লেবুক/রোল রান করার আগে লোকাল এনভায়রনমেন্টে টেস্ট করে দেখা হয়। এতে করে ভুল হলে সহজেই ঠিক করা যায়, এবং চূড়ান্ত পরিবেশন (প্রোডাকশন) নিরাপদ হয়।

## CI/CD Pipeline-এ Molecule

Molecule কে Jenkins বা GitHub Actions-এর সাথে ইন্টিগ্রেট করলে, প্রতিবার কোড চেঞ্জ হলে অটোমেটিক টেস্ট চলে। এতে করে বাগ, ভুল কনফিগারেশন, বা ডিপেন্ডেন্সি সমস্যা আগেই ধরা পড়ে।

## Best Practices
- প্রতিটি রোল/প্লেবুকের জন্য আলাদা Molecule টেস্ট লিখুন
- Docker ইমেজে মিনিমাল অপারেটিং সিস্টেম ব্যবহার করুন
- Verify স্টেপে assert, testinfra, বা ansible module ব্যবহার করুন
- টেস্টে সিক্রেট/পাসওয়ার্ড ব্যবহার না করা

## উপসংহার
Molecule দিয়ে আনসিবল প্লেবুক ও রোলের লোকাল টেস্টিং করলে, কোডের স্থায়িত্ব, নিরাপত্তা ও স্কেলেবিলিটি নিশ্চিত হয়। প্রোডাকশন ডিপ্লয়মেন্টের আগে "রান্না করার আগে স্বাদ নিয়ে দেখা"—এই নীতিতে চলুন, এবং Molecule কে আপনার ডেভেলপমেন্ট লাইফসাইকেলে যুক্ত করুন।
